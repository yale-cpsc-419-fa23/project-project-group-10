{"ast":null,"code":"var _jsxFileName = \"/Users/alymoosa/Documents/yale-cpsc-419-fa23/project-project-group-10/react/src/components/pages/Login.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport '../../App.css';\nimport './RegisterInfo.css';\nfunction LoginPage() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const navigate = useNavigate();\n  const logInUser = () => {\n    if (email.length === 0) {\n      alert(\"Email has been left blank!\");\n    } else if (password.length === 0) {\n      alert(\"Password has been left blank!\");\n    } else {\n      axios.post('http://127.0.0.1:5000/login', {\n        email: email,\n        password: password\n      }).then(function (response) {\n        console.log(response);\n        const userInfo = response.data.user_info; // Assuming the response has 'user_info'\n\n        // Check the user role obtained from the response\n        const refreshQueryParam = `?refresh=${Date.now()}`;\n        if (userInfo.role === 0) {\n          navigate(`/researcher-homepage${refreshQueryParam}`);\n          window.location.reload(true);\n        } else if (userInfo.role === 1) {\n          navigate(`/participant-homepage${refreshQueryParam}`);\n          window.location.reload(true);\n        } else {\n          // Handle other roles or unexpected scenarios\n          alert(\"Unknown role, unable to redirect.\");\n        }\n      }).catch(function (error) {\n        console.log(error, 'error');\n        if (error.response && error.response.status === 401) {\n          alert(\"Invalid credentials\");\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"register-container-login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, \"Welcome Back :)\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label\",\n    for: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    className: \"input-box\",\n    name: \"email\",\n    type: \"email\",\n    id: \"email\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label\",\n    for: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \"Password:\"), /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    className: \"input-box\",\n    name: \"password\",\n    type: \"password\",\n    id: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"custom-primary\",\n    onClick: logInUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"small fw-bold mt-2 pt-1 mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, \"Don't have an account? \", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/register\",\n    className: \"link-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 78\n    }\n  }, \"Register\")))));\n}\n;\nexport default LoginPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","LoginPage","email","setEmail","password","setPassword","navigate","logInUser","length","alert","post","then","response","console","log","userInfo","data","user_info","refreshQueryParam","Date","now","role","window","location","reload","catch","error","status","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","for","required","name","type","id","value","onChange","e","target","onClick","href"],"sources":["/Users/alymoosa/Documents/yale-cpsc-419-fa23/project-project-group-10/react/src/components/pages/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport '../../App.css';\nimport './RegisterInfo.css';\n\nfunction LoginPage() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const navigate = useNavigate();\n\n  const logInUser = () => {\n    if (email.length === 0) {\n      alert(\"Email has been left blank!\");\n    } else if (password.length === 0) {\n      alert(\"Password has been left blank!\");\n    } else {\n      axios.post('http://127.0.0.1:5000/login', {\n        email: email,\n        password: password\n      })\n      .then(function (response) {\n        console.log(response);\n        const userInfo = response.data.user_info; // Assuming the response has 'user_info'\n\n        // Check the user role obtained from the response\n        const refreshQueryParam = `?refresh=${Date.now()}`;\n        if (userInfo.role === 0) {\n          navigate(`/researcher-homepage${refreshQueryParam}`);\n          window.location.reload(true);\n        } \n        else if (userInfo.role === 1) {\n          navigate(`/participant-homepage${refreshQueryParam}`);\n          window.location.reload(true);\n        } \n        else {\n          // Handle other roles or unexpected scenarios\n          alert(\"Unknown role, unable to redirect.\");\n        }\n      })\n      .catch(function (error) {\n        console.log(error, 'error');\n        if (error.response && error.response.status === 401) {\n          alert(\"Invalid credentials\");\n        }\n      });\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"register-container-login\">\n        <h1>Welcome Back :)</h1>\n        <br></br>\n        <form>\n          <div className=\"form-container\">\n            <div className=\"form-group\">\n            <label className=\"label\" for=\"email\">Email:</label>\n              <input\n                required\n                className=\"input-box\"\n                name=\"email\"\n                type=\"email\"\n                id=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n            </div>\n          </div>\n          <div className=\"form-container\">\n            <div className=\"form-group\">\n            <label className=\"label\" for=\"password\">Password:</label>\n              <input\n                required\n                className=\"input-box\"\n                name=\"password\"\n                type=\"password\"\n                id=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n            </div>\n          </div>\n          <button type=\"button\" className=\"custom-primary\" onClick={logInUser} >Login</button>\n          <p className=\"small fw-bold mt-2 pt-1 mb-0\">Don't have an account? <a href=\"/register\" className=\"link-danger\">Register</a></p>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}